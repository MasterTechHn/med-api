FROM node:12.16.3

WORKDIR /mep-api

ARG APP_HOST
ARG APP_PORT
ARG DB_HOST
ARG DB_PORT
ARG DB_NAME
ARG DB_USER
ARG DB_PASSWORD 

ENV APP_HOST $APP_HOST
ENV APP_PORT $APP_PORT
ENV DB_HOST $DB_HOST
ENV DB_PORT $DB_PORT
ENV DB_NAME $DB_NAME
ENV DB_USER $DB_USER
ENV DB_PASSWORD $DB_PASSWORD

COPY ["package.json", "package-lock.json" , "./"]

EXPOSE 8080/tcp

EXPOSE 8080/udp

RUN npm install -g nodemon

RUN npm install

COPY . .

CMD ["node","server.js"]